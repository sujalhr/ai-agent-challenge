# ai-agent-challenge
AI PDF Parser Agent
An intelligent agent that automatically generates Python parsers for bank statement PDFs using LangGraph and Google Gemini AI.
ğŸ¯ What It Does
The agent analyzes your PDF bank statements and CSV examples, then writes custom Python parsers that can extract structured data from similar PDFs. It uses a plan â†’ generate â†’ test â†’ refine loop with up to 3 self-correction attempts.
ğŸ—ï¸ Architecture

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Plan     â”‚â”€â”€â”€â–¶â”‚  Generate    â”‚â”€â”€â”€â–¶â”‚    Test     â”‚â”€â”€â”€â–¶â”‚   Decide    â”‚
â”‚  (Attempt)  â”‚    â”‚    Code      â”‚    â”‚  & Validate â”‚    â”‚ (Retry/End) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                                                           â”‚
       â”‚                        Retry Loop                         â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

       
The agent uses LangGraph to orchestrate the workflow, Google Gemini for code generation, and pdfplumber for PDF parsing. Each generated parser is automatically tested against expected output before being finalized.
ğŸ“‹ Prerequisites

Python 3.8+
Google Gemini API key (Get one free)

ğŸš€ 5-Step Setup & Run
Step 1: Clone and Install Dependencies
bashgit clone <your-repo>
cd AI-AGENT-C
pip install -r requirements.txt
Step 2: Set Up Environment Variables
Create a .env file in the project root:
bashecho "GEMINI_API_KEY=your_api_key_here" > .env
Step 3: Prepare Your Data
Place your sample files in the data directory:
data/
â””â”€â”€ icici/
    â”œâ”€â”€ icic_sample.pdf    # Input PDF to parse
    â””â”€â”€ icic_sample.csv    # Expected output format
Step 4: Run the Agent
bashpython agent.py --target icici
Step 5: Use the Generated Parser
pythonfrom custom_parsers.icici_parser import parse
import pandas as pd

# Parse any similar PDF
df = parse("path/to/new_icici_statement.pdf")
print(df.head())
ğŸ“ Project Structure
AI-AGENT-C/
â”œâ”€â”€ agent.py              # Main agent orchestrator
â”œâ”€â”€ custom_parsers/       # Generated parsers (auto-created)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ icici_parser.py   # Generated by agent
â”œâ”€â”€ data/                 # Sample data for training
â”‚   â””â”€â”€ icici/
â”‚       â”œâ”€â”€ icic_sample.pdf
â”‚       â””â”€â”€ icic_sample.csv
â”œâ”€â”€ .env                  # API keys (create this)
â”œâ”€â”€ requirements.txt      # Dependencies
â””â”€â”€ README.md            # This file
ğŸ“Š Parser Contract
All generated parsers follow this contract:
pythondef parse(pdf_path: str) -> pd.DataFrame:
    """
    Parse a bank statement PDF and return structured data.
    
    Args:
        pdf_path (str): Path to the PDF file
        
    Returns:
        pd.DataFrame: Structured data matching the expected CSV schema
    """
ğŸ”§ How It Works

Planning: Agent initializes attempt counter and prepares for code generation
Code Generation: Gemini AI analyzes the PDF/CSV samples and writes a custom parser
Testing: Generated parser is executed and output compared with expected CSV using DataFrame.equals()
Decision: If test passes â†’ success; if fails and attempts < 3 â†’ retry with error feedback
Self-Correction: Failed parsers get regenerated with specific error context for improvement
