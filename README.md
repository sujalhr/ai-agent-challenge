# ai-agent-challenge
AI PDF Parser Agent
An intelligent agent that automatically generates Python parsers for bank statement PDFs using LangGraph and Google Gemini AI.
🎯 What It Does
The agent analyzes your PDF bank statements and CSV examples, then writes custom Python parsers that can extract structured data from similar PDFs. It uses a plan → generate → test → refine loop with up to 3 self-correction attempts.
🏗️ Architecture

┌─────────────┐    ┌──────────────┐    ┌─────────────┐    ┌─────────────┐
│    Plan     │───▶│  Generate    │───▶│    Test     │───▶│   Decide    │
│  (Attempt)  │    │    Code      │    │  & Validate │    │ (Retry/End) │
└─────────────┘    └──────────────┘    └─────────────┘    └─────────────┘
       ▲                                                           │
       │                        Retry Loop                         │
       └───────────────────────────────────────────────────────────┘

       
The agent uses LangGraph to orchestrate the workflow, Google Gemini for code generation, and pdfplumber for PDF parsing. Each generated parser is automatically tested against expected output before being finalized.
📋 Prerequisites

Python 3.8+
Google Gemini API key (Get one free)

🚀 5-Step Setup & Run
Step 1: Clone and Install Dependencies
bashgit clone <your-repo>
cd AI-AGENT-C
pip install -r requirements.txt
Step 2: Set Up Environment Variables
Create a .env file in the project root:
bashecho "GEMINI_API_KEY=your_api_key_here" > .env
Step 3: Prepare Your Data
Place your sample files in the data directory:
data/
└── icici/
    ├── icic_sample.pdf    # Input PDF to parse
    └── icic_sample.csv    # Expected output format
Step 4: Run the Agent
bashpython agent.py --target icici
Step 5: Use the Generated Parser
pythonfrom custom_parsers.icici_parser import parse
import pandas as pd

# Parse any similar PDF
df = parse("path/to/new_icici_statement.pdf")
print(df.head())
📁 Project Structure
AI-AGENT-C/
├── agent.py              # Main agent orchestrator
├── custom_parsers/       # Generated parsers (auto-created)
│   ├── __init__.py
│   └── icici_parser.py   # Generated by agent
├── data/                 # Sample data for training
│   └── icici/
│       ├── icic_sample.pdf
│       └── icic_sample.csv
├── .env                  # API keys (create this)
├── requirements.txt      # Dependencies
└── README.md            # This file
📊 Parser Contract
All generated parsers follow this contract:
pythondef parse(pdf_path: str) -> pd.DataFrame:
    """
    Parse a bank statement PDF and return structured data.
    
    Args:
        pdf_path (str): Path to the PDF file
        
    Returns:
        pd.DataFrame: Structured data matching the expected CSV schema
    """
🔧 How It Works

Planning: Agent initializes attempt counter and prepares for code generation
Code Generation: Gemini AI analyzes the PDF/CSV samples and writes a custom parser
Testing: Generated parser is executed and output compared with expected CSV using DataFrame.equals()
Decision: If test passes → success; if fails and attempts < 3 → retry with error feedback
Self-Correction: Failed parsers get regenerated with specific error context for improvement
